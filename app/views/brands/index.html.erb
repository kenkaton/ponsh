<% content_for :title, t('brands.index.title') %>

<div class="w-full">
  <% if notice.present? %>
    <p class="py-2 px-3 bg-green-50 mb-5 text-green-500 font-medium rounded-md inline-block" id="notice"><%= notice %></p>
  <% end %>

  <div class="flex justify-between items-center mb-6">
    <h1 class="font-bold text-4xl"><%= t('brands.index.title') %></h1>
  </div>

  <div class="mb-8">
    <%= render partial: 'shared/search_form', locals: { visible: '', query: @query } %>
  </div>

  <div id="brands" class="space-y-4">
    <% if @brands.any? %>
      <% @brands.each do |brand| %>
        <%= link_to brand, class: "block w-full", data: { action: "click->gtm#track", "gtm-event-value" => "view_brand_from_list", "gtm-category-value" => "brand", "gtm-action-value" => "view_brand_from_list", "gtm-label-value" => brand.name } do %>
          <div id="<%= dom_id brand %>" class="w-full flex justify-between items-center p-4 border rounded-lg shadow-sm hover:bg-gray-50">
            <div class="flex-1">
              <div class="flex flex-wrap items-center gap-2">
                <h3 class="text-lg font-medium text-gray-900"><%= brand.name %></h3>
                <span class="text-sm text-gray-500"><%= brand.kana %></span>
              </div>
              <% if brand.company.present? %>
                <div class="mt-1 text-sm text-gray-600">
                  <%= brand.company.name %>
                  <% if brand.company.address.present? %>
                    <span class="text-gray-400">/</span>
                    <%= brand.company.address.prefecture.name %>
                    <span class="text-gray-400">/</span>
                    <%= brand.company.address.city %>
                  <% end %>
                </div>
              <% end %>
            </div>
          </div>
        <% end %>
      <% end %>
    <% else %>
      <p class="text-center my-10"><%= t('brands.index.no_brands') %></p>
    <% end %>
  </div>

  <div class="mt-8 flex justify-center">
    <%== pagy_nav(@pagy, class: 'pagy') %>
  </div>
</div>
